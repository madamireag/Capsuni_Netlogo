turtles-own [power]
globals[
val
]
to setup
clear-all
define-turtles
set-background
reset-ticks
end

to define-turtles
  create-turtles number_of_strawberries
  [setxy random-pxcor random-pycor
    set color 55
    set val  0.7 * sun + 0.3 * rain
    set power random 50]
  set-default-shape turtles "strawberry"
end

to set-background
  ask patches [set pcolor 34]
end

to grow
  ask turtles [if sun >= 40
    [set power power + 10]]
  ask turtles  [if rain >= 20
    [set power power + 5]]
  ask turtles  [if sun >= 90 or rain < 20
    [set power power - 10]]
  ask turtles  [if rain > 70 or sun < 40
    [set power power - 20]]
  ask turtles with [power >= val]
  [set color red]
 show count turtles with [color = red]
end

to go
 grow
 tick
 ifelse all? turtles [ color = red ]
  [stop]
  [ show "there are no red strawberries or at least one strawberry is red!"]
end
